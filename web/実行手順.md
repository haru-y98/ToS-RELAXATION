# 🎯 ToS Relaxation MVP - 実行手順（離席後でもOK）

## 現在の状態

✅ **開発サーバーは起動済みです**
- http://localhost:3000

✅ **すべてのコードは実装完了しています**

❗ **あと2ステップでMVPが完全に動きます**

---

## 📝 残りの作業（あなたが実施）

### ステップ1: Supabaseでテーブルを作成（1分）

1. 以下のURLを開く:
   ```
   https://app.supabase.com/project/isduqadpcgirxhejhyzw/sql/new
   ```

2. `schema.sql` ファイルの内容をコピーして、SQL Editorに貼り付け

3. 「RUN」ボタンをクリック

4. 成功メッセージが表示されればOK

### ステップ2: テストデータを投入（30秒）

**方法A: ブラウザで簡単に実行**
1. http://localhost:3000/setup.html を開く
2. 「データベースをセットアップ」ボタンをクリック
3. 緑色のログが表示されれば成功

**方法B: SQLで直接実行**
1. Supabase SQL Editorで新しいクエリを開く
2. `test-data.sql` の内容を貼り付けて実行

### ステップ3: アプリケーションを確認（完了！）

http://localhost:3000 にアクセス

---

## ✅ 確認項目

- [ ] トップページが表示される
- [ ] 「施術者を探す」をクリック → 3人の施術者が表示される
- [ ] 施術者カードをクリック → 詳細モーダルが開く
- [ ] 「予約する」をクリック → 予約フォームに遷移
- [ ] 日付を選択 → 時間のドロップダウンが表示される
- [ ] メニューを選択 → 予約ボタンが有効になる
- [ ] 「予約する」をクリック → 予約完了のアラート表示

---

## 📊 実装済みの機能

### フロントエンド
- ✅ トップページ（Hero + ナビゲーション）
- ✅ 施術者一覧ページ（グリッド表示、NEW/人気バッジ）
- ✅ 施術者詳細モーダル（基本情報、資格、出張対応など）
- ✅ 予約フォーム（日付・時間・メニュー選択）

### バックエンド（API）
- ✅ `GET /api/members` - メンバー一覧
- ✅ `GET /api/menus?member_id=xxx` - メニュー取得
- ✅ `GET /api/available-times?member_id=xxx&date=2025-01-01` - 空き時間
- ✅ `POST /api/bookings` - 予約作成

### データベース
- ✅ members テーブル（施術者情報）
- ✅ menus テーブル（施術メニュー）
- ✅ member_availability テーブル（営業時間）
- ✅ bookings テーブル（予約情報）
- ✅ RLSポリシー設定済み

### テストデータ
- ✅ 3人の施術者（太郎、次郎、三郎）
- ✅ 7種類のメニュー（¥7,000〜¥15,000）
- ✅ 30日間分の営業時間

---

## 📁 ファイル構成

```
relaxation/
├── app/
│   ├── api/
│   │   ├── members/route.ts          # メンバー一覧API
│   │   ├── menus/route.ts            # メニュー取得API
│   │   ├── available-times/route.ts  # 空き時間API
│   │   └── bookings/route.ts         # 予約作成API
│   ├── booking/
│   │   └── page.tsx                  # 予約フォーム
│   ├── therapists/
│   │   └── page.tsx                  # 施術者一覧
│   ├── layout.tsx                    # レイアウト
│   ├── page.tsx                      # トップページ
│   └── globals.css                   # グローバルCSS
├── components/
│   └── MemberModal.tsx               # 施術者詳細モーダル
├── lib/
│   └── supabase.ts                   # Supabaseクライアント
├── public/
│   └── setup.html                    # データセットアップツール
├── .env.local                        # 環境変数
├── schema.sql                        # DBスキーマ定義
├── test-data.sql                     # テストデータ
└── ドキュメント各種
```

---

## 🔧 トラブルシューティング

### 1. テーブルが作成できない

**症状**: SQL実行時にエラーが出る

**解決法**:
- Supabaseにログインしているか確認
- プロジェクトIDが正しいか確認（isduqadpcgirxhejhyzw）
- SQL全体をコピーしているか確認

### 2. データが表示されない

**症状**: 施術者一覧が空

**解決法**:
1. ブラウザのコンソールを開く（F12）
2. エラーメッセージを確認
3. http://localhost:3000/setup.html でデータを再投入
4. Supabase Table Editorで `SELECT * FROM members;` を実行してデータを確認

### 3. 予約ボタンが押せない

**症状**: 予約ボタンがグレーアウト

**解決法**:
- 日付、時間、メニューをすべて選択
- 日付を選択すると時間のドロップダウンが表示される

### 4. 開発サーバーが止まった

**解決法**:
```bash
npm run dev
```

---

## 📖 参考ドキュメント

- `START.md` - クイックスタートガイド
- `SETUP_GUIDE.md` - 詳細セットアップ手順
- `README.md` - プロジェクト概要
- `COMPLETION.md` - 完成報告

---

## 🎉 完成後の動作

1. **トップページ**
   - Hero セクションが表示
   - 「施術者を探す」ボタンで施術者一覧へ

2. **施術者一覧**
   - 3人の施術者がグリッド表示
   - 太郎: NEW バッジ
   - 次郎: 人気 バッジ
   - 三郎: バッジなし

3. **施術者詳細**
   - カードクリックでモーダル表示
   - 年齢、身長、体重、居住地
   - 資格、出張対応、アピールコメント
   - 「予約する」ボタン

4. **予約フォーム**
   - 日付選択（カレンダー）
   - 時間選択（10:00-22:00の1時間刻み）
   - メニュー選択（その施術者のメニュー一覧）
   - 予約確定 → アラート表示

---

## 💡 ヒント

- セットアップは5分以内で完了します
- ブラウザのセットアップツール（setup.html）が最も簡単です
- エラーが出たら、コンソールを確認してください
- わからないことがあれば、ドキュメントを参照してください

**お疲れ様でした！🚀**
